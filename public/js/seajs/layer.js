/*  
Append File:/as/js-2.0.2/layer.js
*/
/*! Autoshow - V(2.0.2) - build(2014.01.09) */
define("layer",["jquery","support"],function(e,t,n){"use strict";var r=e("jquery"),o=e("support"),a=o.fixed,i=function(e,t){this.options=t,this.$elem=e.on("click.dismiss.layer",'[data-dismiss="layer"]',r.proxy(this.hide,this))};i.prototype={constructor:i,toggle:function(){return this[this.shown?"hide":"show"]()},show:function(){var e=this;e.shown||(e.$elem.trigger(r.Event("show")),e.shown=!e.shown,e.backdrop(function(){var t=r(window),n=t.height();e._fixed=e.$elem.outerHeight()>n?!1:!0,e.$elem.css({position:e._fixed?a?"fixed":"absolute":"absolute",zIndex:1001}).removeClass("fn-hide").trigger("shown"),e.resize(),e.options.anim&&e.effect("fadeIn"),r(window).on("resize.layer scroll.layer",r.proxy(e.resize,e)),e.escape()}))},hide:function(e){var t=this,n=r.Callbacks();t.shown&&(t.$elem.trigger(r.Event("hide")),t.shown=!t.shown,t.escape(),n.add(function(){t.$elem.addClass("fn-hide"),t.backdrop(),t.$elem.trigger("hidden"),n.empty()}),t.options.anim?t.effect("fadeOut",n.fire):n.fire(),r(window).off("resize.layer scroll.layer"),e&&e.preventDefault())},resize:function(){var e=r(window).width(),t=r(window).height(),n={left:e/2-this.$elem.outerWidth()/2};this._fixed&&(n.top=t/2-this.$elem.outerHeight()/2+(a?0:r(window).scrollTop())),this.$elem.css(n),this.options.backdrop&&this.back.css({height:Math.max(t,r(document).height()),width:e})},escape:function(){var e=this;e.options.keyboard&&(e.shown?r(document).on("keyup.layer",function(t){27==t.which&&e.hide()}):r(document).off("keyup.layer"))},backdrop:function(e){var t=this,n=t.options,o=n.anim?150:0,i='<div style="background:#000;opacity:0;filter:alpha(opacity=0);top:0;left:0;z-index:1000;position:'+(a?'fixed;">':'absolute;"><iframe scrolling="no" frameborder="0" style="width:100%;height:100%;filter:alpha(opacity=0);position:absolute;top:0;left:0;z-index:1;"></iframe>')+"</div>";n.backdrop?t.shown?(t.back=r(i).appendTo("body"),n.backclicktohide&&t.back.on("click",r.proxy(t.hide,t)),t.back.animate({opacity:.5},o,e)):t.back&&t.back.fadeOut(o,function(){t.removeBackdrop(),e&&e()}):e&&e()},removeBackdrop:function(){this.back.remove(),this.back=null},effect:function(e,t){var n=this;switch(e){case"fadeIn":n.$elem.stop(!0).css({top:r(window).height()/2-n.$elem.outerHeight()/2-30+(a?0:r(window).scrollTop()),opacity:0}).animate({top:n._fixed?r(window).height()/2-n.$elem.outerHeight()/2+(a?0:r(window).scrollTop()):r(window).scrollTop(),opacity:1},200,t);break;case"fadeOut":n.$elem.stop(!0).animate({top:r(window).height()/2-n.$elem.outerHeight()/2-30+(a?0:r(window).scrollTop()),opacity:0},200,t)}}},r.fn.layer=function(e){return this.each(function(){var t=r(this),n=t.data("layer"),o=r.extend({},r.fn.layer.defaults,t.data(),"object"==typeof e&&e);n||t.data("layer",n=new i(t,o)),"string"==typeof e?n[e]():o.show&&n.show()})},r.fn.layer.Constructor=i,r.fn.layer.defaults={backdrop:!0,backclicktohide:!0,keyboard:!0,show:!0,effect:"fade",anim:!0},r(function(){r(document).on("click.layer.data-api",'[data-toggle="layer"]',function(e){var t,n=r(this),o=r(n.attr("data-target")||(t=n.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("layer")?"toggle":r.extend({},o.data(),n.data());o.layer(a),e.preventDefault()})}),n.exports=r});
